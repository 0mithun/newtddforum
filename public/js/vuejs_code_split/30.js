(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"8iqb":function(e,t,a){"use strict";a.r(t);var r=a("wd/R"),i=a.n(r),n={props:["threads","query","all_tags"],data:function(){return{allThreads:[],q:this.query,sort_by:"topRated",filter_emojis:[],filter_rated:[],search:!1,category:[],filter_tags:[],filter_length:[],emojis:"",tags:Object.values(this.all_tags),paginatedItems:this.allThreads,page:1,perPage:10,limitLinks:10,formPage:1,toPage:1}},watch:{filter_length:function(e){this.filterThreads()},filter_emojis:function(e){this.filterThreads()},filter_rated:function(e){this.filterThreads()},category:function(e){this.filterThreads()},filter_tags:function(e){this.filterThreads()}},created:function(){this.allThreads=Object.values(this.threads),this.getAllEmojis(),this.setCurrentPage(),this.paginateLimit(),this.paginate(this.perPage,this.page),this.sortBy()},computed:{currentPage:function(){return this.page},totalPage:function(){return Math.ceil(this.postsCount/this.perPage)},filterOpen:function(){return this.filter_length.length>0||this.filter_emojis.length>0||this.filter_rated.length>0||this.category.length>0||this.filter_tags.length>0},postsCount:function(){return this.filterOpen,this.allThreads.length},pageRange:function(){return _.range(this.formPage,this.toPage)},mapUrl:function(){return"/map/show?query=".concat(this.q)}},methods:{setCurrentPage:function(){var e=new URLSearchParams(window.location.search).get("page");this.page=e&&""!=e?e:this.page},paginate:function(e,t){var a=(t-1)*e,r=t*e,i=this.allThreads.slice(a,r);this.paginatedItems=i},onPageChange:function(e){this.page=e,history.pushState(null,null,"?query="+this.q+"&page="+e),this.paginateLimit(),this.paginate(this.perPage,e)},paginateLimit:function(){var e=Math.floor(this.limitLinks/2),t=this.page-e,a=Number.parseInt(this.page)+e;this.page<e&&(a+=e-this.page),this.totalPage-this.page<e&&(t-=e-(this.totalPage-this.page)-1),t<e&&(t=1),a>this.totalPage&&(a=this.totalPage),this.formPage=t,this.toPage=a+1},filterThreads:function(){this.paginatedItems=[],this.page=1;var e=Object.values(this.threads);this.filter_rated.length>0&&(e=this.filterByRated(this.filter_rated,e)),this.category.length>0&&(e=this.filterByCategory(this.category,e)),this.filter_tags.length>0&&(e=this.filterByTags(this.filter_tags,e)),this.filter_emojis.length>0&&(e=this.filterByEmojis(this.filter_emojis,e)),this.filter_length.length>0&&(e=this.filterByLength(this.filter_length,e)),this.allThreads=e,this.paginatedItems=this.allThreads,this.paginate(this.perPage,this.currentPage)},filterByLength:function(e,t){return _.filter(t,(function(t){for(var a=!1,r=0;r<e.length;r++){var i=0,n=301;if("sort"==e[r]?(i=0,n=100):"medium"==e[r]?(i=100,n=300):"long"==e[r]&&(i=300,n=301),301===n){if(t.word_count>=300){a=!0;break}}else if(t.word_count>=i&t.word_count<=n){a=!0;break}}return a}))},filterByEmojis:function(e,t){var a=_.filter(t,(function(e){return e.emojis.length>0}));return _.filter(a,(function(t){for(var a=0;a<t.emojis.length;a++)if(_.includes(e,t.emojis[a].name))return!0}))},filterByRated:function(e,t){return _.filter(t,(function(t){if(_.includes(e,t.age_restriction))return!0}))},filterByCategory:function(e,t){return _.filter(t,(function(t){if(_.includes(e,t.cno))return!0}))},filterByTags:function(e,t){var a=_.filter(t,(function(e){return e.tagNameList.length>0}));return _.filter(a,(function(t){for(var a=!1,r=0;r<t.tagNameList.length;r++)if(_.includes(e,t.tagNameList[r].trim().toLowerCase())){a=!0;break}if(a)return!0}))},getAllEmojis:function(){var e=this;axios.get("/all-emojis").then((function(t){e.emojis=t.data}))},getAllTags:function(){var e=this;axios.get("/all-tags").then((function(t){e.tags=t.data}))},searchThread:function(){var e="/anecdotes/search?query="+this.q;window.location.href=e},sortBy:function(){var e=_.orderBy(this.allThreads,[this.sort_by],"desc");this.allThreads=e},ago:function(e){return i()(e,"YYYY-MM-DD HH:mm:ss").fromNow()+"..."},searchThreads:function(){var e=this;""!=this.q&&(this.search=!0,axios.get("/anecdotes/search?query="+this.q+"&sort_by="+this.sort_by).then((function(t){e.allThreads=t.data,e.threads=t.data})))}}},s=(a("Txg4"),a("KHd+")),l=Object(s.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"panel-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 filter-search"},[a("div",{staticClass:"count-column"},[e._v(e._s(e._f("formatCount")(e.postsCount))+" Results")]),e._v(" "),a("div",{staticClass:"sort-column"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.sort_by,expression:"sort_by"}],staticClass:"sortBy",attrs:{name:"",id:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.sort_by=t.target.multiple?a:a[0]},e.sortBy]}},[a("option",{attrs:{value:"topRated"}},[e._v("Top Rated")]),e._v(" "),a("option",{attrs:{value:"created_at"}},[e._v("Most Recent")]),e._v(" "),a("option",{attrs:{value:"like_count"}},[e._v("Most Liked")]),e._v(" "),a("option",{attrs:{value:"favorite_count"}},[e._v("Most Favorited")]),e._v(" "),a("option",{attrs:{value:"visits"}},[e._v("Most Visits")])])]),e._v(" "),a("div",{staticClass:"btn-group"},[e._m(0),e._v(" "),a("ul",{staticClass:"dropdown-menu search-dropdown"},e._l(e.tags,(function(t,r){return a("li",{key:r},[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_tags,expression:"filter_tags"}],attrs:{type:"checkbox",name:"rated",id:""},domProps:{value:t.toLowerCase(),checked:Array.isArray(e.filter_tags)?e._i(e.filter_tags,t.toLowerCase())>-1:e.filter_tags},on:{change:function(a){var r=e.filter_tags,i=a.target,n=!!i.checked;if(Array.isArray(r)){var s=t.toLowerCase(),l=e._i(r,s);i.checked?l<0&&(e.filter_tags=r.concat([s])):l>-1&&(e.filter_tags=r.slice(0,l).concat(r.slice(l+1)))}else e.filter_tags=n}}}),e._v("\n                      "+e._s(t.toLowerCase())+"\n                    ")])])])})),0)]),e._v(" "),a("div",{staticClass:"btn-group"},[e._m(1),e._v(" "),a("ul",{staticClass:"dropdown-menu search-dropdown"},[a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],attrs:{type:"checkbox",name:"rated",id:"",value:"C"},domProps:{checked:Array.isArray(e.category)?e._i(e.category,"C")>-1:e.category},on:{change:function(t){var a=e.category,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"C");r.checked?n<0&&(e.category=a.concat(["C"])):n>-1&&(e.category=a.slice(0,n).concat(a.slice(n+1)))}else e.category=i}}}),e._v("\n                      Celebrities\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],attrs:{type:"checkbox",name:"rated",id:"",value:"N"},domProps:{checked:Array.isArray(e.category)?e._i(e.category,"N")>-1:e.category},on:{change:function(t){var a=e.category,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"N");r.checked?n<0&&(e.category=a.concat(["N"])):n>-1&&(e.category=a.slice(0,n).concat(a.slice(n+1)))}else e.category=i}}}),e._v("\n                      Other notables\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.category,expression:"category"}],attrs:{type:"checkbox",name:"rated",id:"",value:"O"},domProps:{checked:Array.isArray(e.category)?e._i(e.category,"O")>-1:e.category},on:{change:function(t){var a=e.category,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"O");r.checked?n<0&&(e.category=a.concat(["O"])):n>-1&&(e.category=a.slice(0,n).concat(a.slice(n+1)))}else e.category=i}}}),e._v("\n                      Other People\n                    ")])])])])]),e._v(" "),a("div",{staticClass:"btn-group"},[e._m(2),e._v(" "),a("ul",{staticClass:"dropdown-menu search-dropdown"},e._l(e.emojis,(function(t,r){return a("li",{key:r},[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_emojis,expression:"filter_emojis"}],staticClass:"filter-emoji-checkbox",attrs:{type:"checkbox",name:"like",id:""},domProps:{value:t.name,checked:Array.isArray(e.filter_emojis)?e._i(e.filter_emojis,t.name)>-1:e.filter_emojis},on:{change:function(a){var r=e.filter_emojis,i=a.target,n=!!i.checked;if(Array.isArray(r)){var s=t.name,l=e._i(r,s);i.checked?l<0&&(e.filter_emojis=r.concat([s])):l>-1&&(e.filter_emojis=r.slice(0,l).concat(r.slice(l+1)))}else e.filter_emojis=n}}}),e._v(" "),a("span",{key:r,staticClass:"filter-emoji",class:t.name,style:{"background-image":"url(/images/emojis/"+t.name+".png)"}},[e._v(e._s(t.name))])])])])})),0)]),e._v(" "),a("div",{staticClass:"btn-group"},[e._m(3),e._v(" "),a("ul",{staticClass:"dropdown-menu search-dropdown"},[a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_length,expression:"filter_length"}],attrs:{type:"checkbox",name:"length",id:"",value:"sort"},domProps:{checked:Array.isArray(e.filter_length)?e._i(e.filter_length,"sort")>-1:e.filter_length},on:{change:function(t){var a=e.filter_length,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"sort");r.checked?n<0&&(e.filter_length=a.concat(["sort"])):n>-1&&(e.filter_length=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_length=i}}}),e._v("\n                      Sort\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_length,expression:"filter_length"}],attrs:{type:"checkbox",name:"length",id:"",value:"medium"},domProps:{checked:Array.isArray(e.filter_length)?e._i(e.filter_length,"medium")>-1:e.filter_length},on:{change:function(t){var a=e.filter_length,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"medium");r.checked?n<0&&(e.filter_length=a.concat(["medium"])):n>-1&&(e.filter_length=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_length=i}}}),e._v("\n                      Medium\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_length,expression:"filter_length"}],attrs:{type:"checkbox",name:"length",id:"",value:"long"},domProps:{checked:Array.isArray(e.filter_length)?e._i(e.filter_length,"long")>-1:e.filter_length},on:{change:function(t){var a=e.filter_length,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,"long");r.checked?n<0&&(e.filter_length=a.concat(["long"])):n>-1&&(e.filter_length=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_length=i}}}),e._v("\n                      Long\n                    ")])])])])]),e._v(" "),a("div",{staticClass:"btn-group"},[e._m(4),e._v(" "),a("ul",{staticClass:"dropdown-menu search-dropdown"},[a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_rated,expression:"filter_rated"}],attrs:{type:"checkbox",name:"rated",id:""},domProps:{value:0,checked:Array.isArray(e.filter_rated)?e._i(e.filter_rated,0)>-1:e.filter_rated},on:{change:function(t){var a=e.filter_rated,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,0);r.checked?n<0&&(e.filter_rated=a.concat([0])):n>-1&&(e.filter_rated=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_rated=i}}}),e._v("\n                      G-rated\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_rated,expression:"filter_rated"}],attrs:{type:"checkbox",name:"rated",id:""},domProps:{value:13,checked:Array.isArray(e.filter_rated)?e._i(e.filter_rated,13)>-1:e.filter_rated},on:{change:function(t){var a=e.filter_rated,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,13);r.checked?n<0&&(e.filter_rated=a.concat([13])):n>-1&&(e.filter_rated=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_rated=i}}}),e._v("\n                      PG-rated\n                    ")])])]),e._v(" "),a("li",[a("div",{staticClass:"checkbox filter-item"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter_rated,expression:"filter_rated"}],attrs:{type:"checkbox",name:"rated",id:""},domProps:{value:18,checked:Array.isArray(e.filter_rated)?e._i(e.filter_rated,18)>-1:e.filter_rated},on:{change:function(t){var a=e.filter_rated,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,18);r.checked?n<0&&(e.filter_rated=a.concat([18])):n>-1&&(e.filter_rated=a.slice(0,n).concat(a.slice(n+1)))}else e.filter_rated=i}}}),e._v("\n                      R-rated\n                    ")])])])])]),e._v(" "),a("div",{staticClass:"map-column"},[a("a",{attrs:{href:e.mapUrl}},[a("img",{attrs:{src:"/images/png/map-icon-red.png",alt:""}}),e._v("\n                Map\n              ")])])])])])]),e._v(" "),0==e.search&&0==e.allThreads.length?a("div",{staticClass:"panel panel-default"},[e._m(5)]):e._e(),e._v(" "),e.search?a("div",{staticClass:"panel panel-default"},[e._m(6)]):e._e(),e._v(" "),e._l(e.paginatedItems,(function(e,t){return a("single-thread",{key:t,attrs:{thread:e}})})),e._v(" "),e.totalPage>1?a("nav",{attrs:{"aria-label":"..."}},[a("ul",{staticClass:"pagination"},[1!=e.currentPage?a("li",{on:{click:function(t){return e.onPageChange(1)}}},[e._m(7)]):e._e(),e._v(" "),e._l(e.pageRange,(function(t){return a("li",{key:t,class:{active:e.currentPage==t},on:{click:function(a){return e.onPageChange(t)}}},[a("span",[e._v("\n            "+e._s(t)+"\n            "),a("span",{staticClass:"sr-only"},[e._v(e._s(t))])])])})),e._v(" "),e.currentPage!=e.totalPage?a("li",{on:{click:function(t){return e.onPageChange(e.totalPage)}}},[e._m(8)]):e._e()],2)]):e._e()],2),e._v(" "),a("div",{staticClass:"col-md-4"},[a("trending-thread")],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-link btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                All Tags\n                "),t("span",{staticClass:"caret"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-link btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                All People\n                "),t("span",{staticClass:"caret"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-link btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                All Moods\n                "),t("span",{staticClass:"caret"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-link btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                All Lengths\n                "),t("span",{staticClass:"caret"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"btn btn-link btn-xs dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("\n                G/PG\n                "),t("span",{staticClass:"caret"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"panel-body"},[t("h3",{staticClass:"text-center"},[this._v("No Results Found")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"panel-body"},[t("h3",{staticClass:"text-center"},[this._v("Search.....")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{attrs:{"aria-hidden":"true"}},[this._v("«")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("span",{attrs:{"aria-hidden":"true"}},[this._v("»")])])}],!1,null,"aebf81e8",null);t.default=l.exports},Mocw:function(e,t,a){(e.exports=a("I1BE")(!1)).push([e.i,"\n.row.filter-row[data-v-aebf81e8] {\r\n  /* margin-top: 10px; */\n}\n.filter-title[data-v-aebf81e8] {\r\n  margin-top: 10px;\n}\n.filter-emoji[data-v-aebf81e8] {\r\n  height: 24px;\r\n  background-color: transparent;\r\n  background-size: 24px;\r\n  background-repeat: no-repeat;\r\n  display: flex;\r\n  margin-right: 20px;\r\n  padding-left: 30px;\r\n  align-items: center;\n}\n.filter-rated[data-v-aebf81e8] {\r\n  display: inline-flex;\r\n  margin-right: 20px;\r\n  padding-top: 3px;\r\n  margin-top: 10px;\n}\n.btn-link[data-v-aebf81e8] {\r\n  color: #636b6f;\r\n  text-decoration: none;\n}\n.btn-link[data-v-aebf81e8]:hover {\r\n  color: #636b6f;\r\n  text-decoration: none;\n}\n.btn-link[data-v-aebf81e8]:focus {\r\n  outline: none;\r\n  text-decoration: none;\n}\n.dropdown-menu.search-dropdown[data-v-aebf81e8] {\r\n  font-size: 12px;\n}\n.dropdown-menu.search-dropdown li a[data-v-aebf81e8]:hover {\r\n  background-color: #eeeeee;\n}\n.filter-item[data-v-aebf81e8] {\r\n  display: block;\r\n  padding: 3px 20px;\r\n  clear: both;\r\n  font-weight: normal;\r\n  line-height: 1.6;\r\n  color: #333333;\r\n  white-space: nowrap;\n}\n.filter-item[data-v-aebf81e8]:hover {\r\n  background-color: #eeeeee;\n}\n.search-results-sorting[data-v-aebf81e8] {\r\n  display: flex;\r\n  align-items: center;\r\n  color: black;\r\n  font-size: 13px;\n}\n.search-results-sorting > *[data-v-aebf81e8] {\r\n  margin-right: 25px;\n}\n.sortBy[data-v-aebf81e8] {\r\n  background-color: transparent;\r\n  border: none;\r\n  outline: none;\r\n  width: auto;\r\n  /* color: rgb(255, 67, 1); */\r\n  color: black;\r\n  font-weight: bold;\r\n  box-shadow: none;\r\n  font-size: 12px;\n}\n.sortBy[data-v-aebf81e8]:focus {\r\n  outline: none;\r\n  border: none;\r\n  box-shadow: none;\n}\nhr[data-v-aebf81e8] {\r\n  margin: 5px 0;\n}\n.map-column a[data-v-aebf81e8] {\r\n  color: black;\r\n  font-size: 13px;\r\n  text-decoration: none;\n}\n.pagination li[data-v-aebf81e8] {\r\n  cursor: pointer;\n}\n.filter-search[data-v-aebf81e8] {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\n}\n.count-column[data-v-aebf81e8] {\r\n  font-size: 13px;\n}\r\n",""])},Txg4:function(e,t,a){"use strict";var r=a("hB/F");a.n(r).a},"hB/F":function(e,t,a){var r=a("Mocw");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(r,i);r.locals&&(e.exports=r.locals)}}]);