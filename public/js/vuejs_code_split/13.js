(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{hIyh:function(t,a,e){"use strict";e.r(a);var n={methods:{onChange:function(t){var a=this;if(t.target.files.length){var e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=function(t){var n=t.target.result;a.$emit("loaded",{src:n,file:e})}}}}},r=e("KHd+"),s={props:["user","site_url"],components:{ImageUpload:Object(r.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("input",{attrs:{type:"file",accept:"image/*"},on:{change:this.onChange}})}),[],!1,null,null,null).exports},data:function(){return{avatar:this.site_url+"/"+this.user.avatar_path}},computed:{canUpdate:function(){var t=this;return this.authorize((function(a){return a.id===t.user.id}))}},methods:{onLoad:function(t){this.avatar=t.src,this.persist(t.file)},persist:function(t){var a=new FormData;a.append("avatar",t),axios.post("/api/users/".concat(this.user.name,"/avatar"),a).then((function(){return flash("Avatar uploaded!")}))}}},i=Object(r.a)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"level"},[e("img",{staticClass:"mr-1",attrs:{src:t.avatar,width:"50",height:"50"}}),t._v(" "),e("h1",{domProps:{textContent:t._s(t.user.name)}})]),t._v(" "),t.canUpdate?e("form",{attrs:{method:"POST",enctype:"multipart/form-data"}},[e("image-upload",{staticClass:"mr-1",attrs:{name:"avatar"},on:{loaded:t.onLoad}})],1):t._e()])}),[],!1,null,null,null);a.default=i.exports}}]);