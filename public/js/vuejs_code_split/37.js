(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"0QvY":function(t,n,i){"use strict";var a=i("EV/E");i.n(a).a},BfAI:function(t,n,i){"use strict";i.r(n);var a=i("f0Wu"),e=i.n(a);e.a.tz.setDefault("America/New_York");var s={data:function(){return{notifications:[]}},created:function(){var t=this;this.fetchNotifications(),Echo.private("App.User.".concat(window.App.user.id)).notification((function(n){t.fetchNotifications(),"App\\Notifications\\NewMessageNotification"==n.type&&t.playNotification()}))},computed:{unreadNotifications:function(){return this.notifications.filter((function(t){return"App\\Notifications\\NewMessageNotification"==t.type&&null==t.read_at}))},messageNotifications:function(){return this.notifications.filter((function(t){return"App\\Notifications\\NewMessageNotification"==t.type}))}},methods:{markAsRead:function(t){var n=this;axios.delete("/profiles/"+window.App.user.username+"/notifications/"+t.id).then((function(i){var a=n.notifications.filter((function(n){return n.id!=t.id}));n.notifications=a}))},fetchNotifications:function(){var t=this;axios.get("/profiles/"+window.App.user.username+"/message-notifications").then((function(n){var i=_.uniqBy(n.data,"data.friend.id");t.notifications=i}))},playNotification:function(){new Audio("http://soundbible.com/mp3/glass_ping-Go445-1207030150.mp3").play()},formateMessageTime:function(t){return e()(t).startOf("hour").fromNow()}}},o=(i("0QvY"),i("KHd+")),r=Object(o.a)(s,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("li",{staticClass:"dropdown"},[i("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[i("img",{staticClass:"navbar-icon pen",attrs:{src:"/images/mail.png",alt:""}}),t._v(" "),i("span",{staticStyle:{color:"red","font-weight":"bold","font-size":"14px"}},[t._v(t._s(t.unreadNotifications.length))])]),t._v(" "),t.messageNotifications.length?i("ul",{staticClass:"dropdown-menu message-notification  dropdown-menu-left list-group"},[t._l(t.messageNotifications,(function(n,a){return i("li",{key:a,staticClass:"list-group-item less-padding"},[i("a",{staticClass:"chat",attrs:{href:"/chat"},on:{click:function(i){return t.markAsRead(n)}}},[i("div",{staticClass:" profile"},[i("img",{staticClass:"profile-image",attrs:{src:n.data.friend.profileAvatarPath,alt:""}})]),t._v(" "),i("div",{staticClass:" message"},[i("div",{staticClass:"profilename"},[i("b",{staticClass:"pull-left",domProps:{textContent:t._s(n.data.friend.name)}})]),t._v(" "),i("div",{staticClass:"message-content"},[i("div",{staticClass:"message-body"},[i("span",{domProps:{textContent:t._s(n.data.message.message)}})]),t._v(" "),i("div",{staticClass:"message-time"},[i("span",{staticClass:"text-muted",staticStyle:{"margin-left":"3px"},domProps:{textContent:t._s(t.formateMessageTime(n.data.message.created_at))}})])])])])])})),t._v(" "),t._m(0)],2):i("ul",{staticClass:"dropdown-menu message-notification dropdown-menu-left"},[t._m(1),t._v(" "),t._m(2)])])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("li",{staticClass:"list-group-item"},[n("a",{attrs:{href:"/chat"}},[this._v("\n                Go to Messenger\n            ")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("li",{staticClass:"list-group-item"},[n("span",{staticClass:"text-center"},[this._v("No Message")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("li",{staticClass:"list-group-item"},[n("a",{attrs:{href:"/chat"}},[this._v("\n                Go to Messenger\n            ")])])}],!1,null,"45bbc016",null);n.default=r.exports},"EV/E":function(t,n,i){var a=i("GXQZ");"string"==typeof a&&(a=[[t.i,a,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,e);a.locals&&(t.exports=a.locals)},GXQZ:function(t,n,i){(t.exports=i("I1BE")(!1)).push([t.i,"\nli.list-group-item[data-v-45bbc016] {\n    /* width: 500px;\n    height: 55px; */\n    vertical-align: center;\n}\nli.list-group-item[data-v-45bbc016]:last-child{\n    border-bottom: none;\n}\nli.list-group-item[data-v-45bbc016]:first-child{\n    border-top: none;\n}\nli.list-group-item a[data-v-45bbc016]:hover{\n    background: none;\n}\nli.list-group-item[data-v-45bbc016]:hover{\n    background:#dddfe2;\n}\n.profile-image[data-v-45bbc016]{\n    width:40px;\n    height:40px;\n    border-radius: 50%;\n}\n.profile[data-v-45bbc016]{\n        padding: 0;\n}\n.message[data-v-45bbc016]{\n}\n.dropdown-menu > li > a[data-v-45bbc016] {\n    padding: 0px;\n}\nli.list-group-item[data-v-45bbc016]{\n    /* padding:5px ; */\n    /* border:none; */\n     border-bottom: 1px solid #ddd;\n}\n.navbar-nav > li > .dropdown-menu.message-notification[data-v-45bbc016] {\n        overflow-y: scroll;\n        width: 300px;\n}\n.dropdown-menu.message-notification > li[data-v-45bbc016] {\n       \n        /* margin-top: 5px; */\n}\n.dropdown-menu.message-notification > li > a[data-v-45bbc016] {\n        display: block;\n        /* padding: 3px 20px; */\n        clear: both;\n        font-weight: normal;\n        line-height: 1.6;\n        color: #333333;\n        white-space: normal;\n        overflow: hidden;\n        height: auto;\n        text-align: justify;\n        /* width: 100%; */\n}\n.less-padding[data-v-45bbc016]{\n        padding: 5px;\n}\n.dropdown-menu.message-notification > li > a.chat[data-v-45bbc016]{\n        display: flex;\n        justify-content: space-between;\n}\n.profile[data-v-45bbc016]{\n        width:15%;\n}\n.message[data-v-45bbc016]{\n        width:85%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        align-content: space-around;\n        justify-content: space-between;\n        font-size: 12px;\n}\n.profilename[data-v-45bbc016]{\n        align-self: flex-end;\n}\n.message-content[data-v-45bbc016]{\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        padding-left: 5px;\n}\n.message-body[data-v-45bbc016]{\n}\n.message-time[data-v-45bbc016]{\n}\n\n",""])}}]);