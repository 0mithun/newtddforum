(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{aBzx:function(e,t,a){"use strict";a.r(t);var r={props:["userlat","userlng","defaultradius","nearest"],data:function(){return{radius:0,query:"",center:{lat:parseFloat(this.userlat),lng:parseFloat(this.userlng)},radiusOptions:[0,100,200,300,400,500,1e3,2e3,5e3]}},created:function(){this.query=location.search,this.radius=this.defaultradius},methods:{fetchNearestLocations:function(){var e=this;if(""==this.query&&(NaN==this.center.lat||NaN==this.center.lng)){if(!navigator.geolocation)return void alert("You must provide your location first");navigator.geolocation.getCurrentPosition((function(t){var a=t.coords.latitude,r=t.coords.longitude;e.center.lat=a,e.center.lng=r}))}axios.post("/map/all-threads",{center:this.center,radius:this.radius,nearest:this.nearest,query:this.query}).then((function(t){var a=t.data,r=e.center,s=6;eventBus.$emit("markers_fetched",a),eventBus.$emit("change_center",r),0==e.radius?s=2:500==e.radius?s=6:1e3==e.radius?s=5:2e3==e.radius?s=4:5e3==e.radius&&(s=3),eventBus.$emit("zoom_decreased",s)}))},setRelatedThread:function(e){this.query="",eventBus.$emit("query_removed"),this.radius=500;var t={lat:Number.parseFloat(e.geometry.location.lat()),lng:Number.parseFloat(e.geometry.location.lng())};this.center=t,this.fetchNearestLocations()}}},s=a("KHd+"),i=Object(s.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("gmap-autocomplete",{staticClass:"form-control",attrs:{placeholder:"Type location for search thread"},on:{place_changed:this.setRelatedThread}})],1)])}),[],!1,null,null,null);t.default=i.exports}}]);