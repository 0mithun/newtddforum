(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{WOeA:function(t,n,e){"use strict";e.r(n);var o={props:["infoContent"],data:function(){return{drawer:null,results:[]}},methods:{focusMarker:function(t){eventBus.$emit("markers_result_clicked",t)},openThread:function(){window.open(this.infoContent.path,"_blank")}},created:function(){var t=this;eventBus.$on("markers_fetched",(function(n){t.results=n.results}))}},i=(e("mzsN"),e("KHd+")),r={props:["userlat","userlng","nearest"],components:{InfoContent:Object(i.a)(o,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"info-content",on:{click:this.openThread}},[n("div",{},[this._v("\n            "+this._s(this.infoContent.title)+"\n        ")]),this._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("img",{attrs:{src:this.infoContent.creator.profileAvatarPath,alt:"",width:"25"}}),this._v(" Posted By: "+this._s(this.infoContent.creator.name)+"   \n")])])}),[],!1,null,"dd48908a",null).exports},data:function(){return{center:{lat:parseFloat(this.userlat),lng:parseFloat(this.userlng)},mapCenter:{lat:parseFloat(this.userlat),lng:parseFloat(this.userlng)},markers:[],zoom:2,infoContent:null,infoWindowPos:{lat:0,lng:0},infoWinOpen:!1,currentMidx:null,infoOptions:{pixelOffset:{width:0,height:-35}}}},methods:{fetchLocations:function(){NaN!=this.center.lat&&NaN!=this.center.lng||alert("You must provide your location first");var t="";t=1==this.nearest?"/map/nearest-threads":"/map/all-threads",axios.post(t,{center:this.center}).then((function(t){var n=t.data;"failed"==t.data.status?alert("You must provide your location first"):eventBus.$emit("markers_fetched",n)}))},toggleInfoWindow:function(t,n){this.infoWindowPos=t.position,this.getThreadDetails(t.thread_id),this.currentMidx==n?this.infoWinOpen=!this.infoWinOpen:(this.infoWinOpen=!0,this.currentMidx=n)},getThreadDetails:function(t){var n=this;axios.post("/map/thread-details",{thread_id:t}).then((function(t){n.infoContent=t.data}))}},created:function(){var t=this;this.fetchLocations(),eventBus.$on("markers_fetched",(function(n){if(t.markers=null,t.markers=n.markers,t.markers.length>0){var e=Math.floor(Math.random()*Math.floor(t.markers.length));t.mapCenter=n.markers[e].position}})),eventBus.$on("markers_result_clicked",(function(n){var e=t.markers[n];t.mapCenter=e.position,t.toggleInfoWindow(e,n)})),eventBus.$on("zoom_decreased",(function(n){t.zoom=n})),eventBus.$on("change_center",(function(n){t.mapCenter=n}))}},s=Object(i.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("GmapMap",{staticStyle:{width:"100%",height:"85vh"},attrs:{center:t.mapCenter,zoom:t.zoom,"map-type-id":"terrain"}},[t._l(t.markers,(function(n,o){return e("GmapMarker",{key:o,attrs:{position:n.position,clickable:!0,draggable:!1},on:{click:function(e){return t.toggleInfoWindow(n,o)}}})})),t._v(" "),e("GmapMarker",{attrs:{position:t.center,clickable:!0,draggable:!1}}),t._v(" "),e("gmap-info-window",{attrs:{options:t.infoOptions,position:t.infoWindowPos,opened:t.infoWinOpen},on:{closeclick:function(n){t.infoWinOpen=!1}}},[null!=this.infoContent?e("info-content",{attrs:{infoContent:t.infoContent}}):t._e()],1)],2)}),[],!1,null,null,null);n.default=s.exports},mzsN:function(t,n,e){"use strict";var o=e("orWW");e.n(o).a},o2VS:function(t,n,e){(t.exports=e("I1BE")(!1)).push([t.i,"\n.info-content[data-v-dd48908a]{\n    cursor: pointer;\n}\n",""])},orWW:function(t,n,e){var o=e("o2VS");"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(o,i);o.locals&&(t.exports=o.locals)}}]);