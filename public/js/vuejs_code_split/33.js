(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"1y+N":function(t,i,a){var n=a("N0my");"string"==typeof n&&(n=[[t.i,n,""]]);var e={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(n,e);n.locals&&(t.exports=n.locals)},BfAI:function(t,i,a){"use strict";a.r(i);var n=a("f0Wu"),e=a.n(n);e.a.tz.setDefault("America/New_York");var s={data:function(){return{notifications:[]}},created:function(){var t=this;this.fetchNotifications(),Echo.private("App.User.".concat(window.App.user.id)).notification((function(i){t.fetchNotifications(),"App\\Notifications\\NewMessageNotification"==i.type&&t.playNotification()}))},computed:{unreadNotifications:function(){return this.notifications.filter((function(t){return"App\\Notifications\\NewMessageNotification"==t.type&&null==t.read_at}))},messageNotifications:function(){return this.notifications.filter((function(t){return"App\\Notifications\\NewMessageNotification"==t.type}))}},methods:{markAsRead:function(t){var i=this;axios.delete("/profiles/"+window.App.user.username+"/notifications/"+t.id).then((function(a){var n=i.notifications.filter((function(i){return i.id!=t.id}));i.notifications=n}))},fetchNotifications:function(){var t=this;axios.get("/profiles/"+window.App.user.username+"/message-notifications").then((function(i){var a=_.uniqBy(i.data,"data.friend.id");t.notifications=a}))},playNotification:function(){new Audio("http://soundbible.com/mp3/glass_ping-Go445-1207030150.mp3").play()},formateMessageTime:function(t){return e()(t).format("MM-D-YYYY, h:mm:ss A")}}},o=(a("CaFa"),a("KHd+")),r=Object(o.a)(s,(function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("li",{staticClass:"dropdown"},[a("a",{staticClass:"dropdown-toggle",attrs:{href:"#","data-toggle":"dropdown"}},[a("img",{staticClass:"navbar-icon pen",attrs:{src:"/images/mail.png",alt:""}}),t._v(" "),a("span",{staticStyle:{color:"red","font-weight":"bold","font-size":"14px"}},[t._v(t._s(t.unreadNotifications.length))])]),t._v(" "),t.messageNotifications.length?a("ul",{staticClass:"dropdown-menu dropdown-menu-left list-group"},t._l(t.messageNotifications,(function(i,n){return a("li",{key:n,staticClass:"list-group-item"},[a("a",{attrs:{href:"/chat"},on:{click:function(a){return t.markAsRead(i)}}},[a("div",{staticClass:"col-md-1 profile"},[a("img",{staticClass:"profile-image",attrs:{src:i.data.friend.profileAvatarPath,alt:""}})]),t._v(" "),a("div",{staticClass:"col-md-11 message"},[a("b",{staticClass:"pull-left",domProps:{textContent:t._s(i.data.friend.name)}}),t._v(" "),a("span",{staticClass:"pull-right",domProps:{textContent:t._s(t.formateMessageTime(i.data.message.created_at))}}),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"text-muted",domProps:{textContent:t._s(i.data.message.message)}})])])])})),0):a("ul",{staticClass:"dropdown-menu dropdown-menu-left"},[t._m(0)])])}),[function(){var t=this.$createElement,i=this._self._c||t;return i("li",{staticClass:"list-group-item",staticStyle:{height:"30px",width:"175px"}},[i("span",{staticClass:"text-center"},[this._v("No Message")])])}],!1,null,"6a7b9c81",null);i.default=r.exports},CaFa:function(t,i,a){"use strict";var n=a("1y+N");a.n(n).a},N0my:function(t,i,a){(t.exports=a("I1BE")(!1)).push([t.i,"\nli.list-group-item[data-v-6a7b9c81] {\n    width: 500px;\n    height: 55px;\n    vertical-align: center;\n}\nli.list-group-item[data-v-6a7b9c81]:last-child{\n    border-bottom: none;\n}\nli.list-group-item[data-v-6a7b9c81]:first-child{\n    border-top: none;\n}\nli.list-group-item a[data-v-6a7b9c81]:hover{\n    background: none;\n}\nli.list-group-item[data-v-6a7b9c81]:hover{\n    background:#dddfe2;\n}\n.profile-image[data-v-6a7b9c81]{\n    width:40px;\n    height:40px;\n    border-radius: 50%;\n}\n.profile[data-v-6a7b9c81]{\n        padding: 0;\n}\n.message[data-v-6a7b9c81]{\n}\n.dropdown-menu > li > a[data-v-6a7b9c81] {\n    padding: 0px;\n}\nli.list-group-item[data-v-6a7b9c81]{\n    padding:5px ;\n}\n",""])}}]);